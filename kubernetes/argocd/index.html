<!doctype html><html lang=en-us><head><title>argocd</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><style>@import "https://fonts.googleapis.com/css2?family=Inconsolata&display=swap";:root{--cursor-visibility:hidden}html,body{width:100%;height:100%;overflow:auto;font-family:inconsolata,monospace;font-size:4vmin;line-height:4.1vmin;font-weight:400}body{margin:0;display:flex;flex-direction:row;justify-content:center;align-items:center}#content{min-width:82vmin;min-height:82vmin}::-webkit-scrollbar{width:10px}::-webkit-scrollbar-track{border-radius:10px;box-shadow:inset 0 0 1px white}::-webkit-scrollbar-thumb{border-radius:10px;box-shadow:0 0 0 1px white}.cursor,#activity-title:after,#activity-content:after,#cd:after,#whoami:after,#cat:after,#tree:after{visibility:var(--cursor-visibility);content:"|";overflow:hidden;color:#fff;animation:blink 500ms linear infinite alternate}@keyframes blink{0%{opacity:0}100%{opacity:1}}@media only screen and (min-width:768px){body{font-size:2.5vmin;line-height:2.6vmin}#content{min-width:60vmin}}:root{--cursor-visibility:hidden}body{align-items:unset;overflow-y:scroll}#content{max-width:80vmin}pre{overflow-x:scroll;white-space:pre}@keyframes blink{0%{opacity:0}100%{opacity:1}}body{background:#002b36}body #terminal{color:#839496}body #user{color:#859900}body #dir{color:#268bd2}body .Typewriter__cursor{color:#839496}a{color:#839496}.navFull{background-color:#353535;font-family:courier new;font-size:17px;display:inline;position:fixed;bottom:0;left:0;width:100%;padding-top:5px;padding:10px;padding-bottom:0}.navCredits{float:right;padding-right:18px;padding-bottom:10px;padding-top:5px}#content::after{content:"\a\a";white-space:pre}</style></head><body><div id=content><span id=activity-title></span><br><span id=activity-content></span><br><script type=text/javascript>async function typewriter(e,t,n){var s=0,o=!1;addText="";const i=document.getElementById(t),a=()=>new Promise(e=>setTimeout(e,n)),r=()=>new Promise(e=>e()),c=()=>i.innerHTML=e.slice(0,s+1)+addText,l=document.createElement("span");for(l.id="blink",i.style.setProperty("--cursor-visibility","visible");s<e.length;){if(e.charAt(s+1)==="<"&&(o=!0),e.charAt(s+1)===">"&&(o=!1),o){s++;continue}requestAnimationFrame(c),n===0?await r():await a(),s++}i.style.setProperty("--cursor-visibility","collapse")}function parseDelay(e){const t=parseInt(e,10);return isNaN(t)?0:t}const titleDelay=parseDelay("0"),contentDelay=parseDelay("0"),typeeffetct=async()=>{await typewriter("\u003cspan id=\u0027terminal\u0027\u003e\u003ch1 id=\u0027title\u0027\u003eargocd\u003c/h1\u003e\u003c/span\u003e","activity-title",titleDelay),await typewriter(`\u003cspan id=\u0027terminal\u0027\u003e\u003cp\u003eChart: \u003ca href=\u0022https://artifacthub.io/packages/helm/argo/argo-cd\u0022\u003ehttps://artifacthub.io/packages/helm/argo/argo-cd\u003c/a\u003e\u003c/p\u003e
\u003cp\u003eRepo: \u003ca href=\u0022https://argo-cd.readthedocs.io/en/stable/getting_started/#1-install-argo-c://github.com/argoproj/argo-helm\u0022\u003ehttps://argo-cd.readthedocs.io/en/stable/getting_started/#1-install-argo-c://github.com/argoproj/argo-helm\u003c/a\u003e\u003c/p\u003e
\u003ch2 id=\u0022install\u0022\u003eInstall\u003c/h2\u003e
\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-plaintext\u0022 data-lang=\u0022plaintext\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003ehelm upgrade -i argocd argo/argo-cd  -n argocd --create-namespace -f argocd-values.yaml
\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch2 id=\u0022local-users\u0022\u003eLocal Users\u003c/h2\u003e
\u003ch3 id=\u0022create\u0022\u003eCreate\u003c/h3\u003e
\u003cp\u003eAdd the following to the \u003ccode\u003eargocd-cm\u003c/code\u003e ConfigMap:\u003c/p\u003e
\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-plaintext\u0022 data-lang=\u0022plaintext\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eaccounts.dev: login
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eaccounts.ci: apiKey
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eaccounts.technat: login
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eaccounts.admin.enabled: \u0026#34;false\u0026#34;
\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eOr the \u003ccode\u003eargocd.config\u003c/code\u003e key in the helm chart.\u003c/p\u003e
\u003ch3 id=\u0022permissions\u0022\u003ePermissions\u003c/h3\u003e
\u003cp\u003eNow edit the \u003ccode\u003eargocd-rbac-cm\u003c/code\u003e ConfigMap and add the following to map the technat user admin rights.\u003c/p\u003e
\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-plaintext\u0022 data-lang=\u0022plaintext\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003edata:
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e policy.default: role:readonly
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e policy.csv: |
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e   g, technat, role:admin
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e   p, role:ci, applications, *, */*, allow
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003e   g, ci, role:ci
\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003cp\u003eOr the \u003ccode\u003eargocd.rbacConfig\u003c/code\u003e key in the helm chart.\u003c/p\u003e
\u003ch3 id=\u0022password\u0022\u003ePassword\u003c/h3\u003e
\u003cp\u003eUsing the argocd cli:\u003c/p\u003e
\u003cdiv class=\u0022highlight\u0022\u003e\u003cpre tabindex=\u00220\u0022 style=\u0022color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;\u0022\u003e\u003ccode class=\u0022language-plaintext\u0022 data-lang=\u0022plaintext\u0022\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eargocd login --grpc-web cd.eatthis.ch
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eargocd account update-password --account dev --new-password \${PASSWORD_HERE} --current-password \${YOUR_PASSWORD}
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eargocd account update-password --account technat --new-password \${PASSWORD_HERE} --current-password \${YOUR_PASSWORD}
\u003c/span\u003e\u003c/span\u003e\u003cspan style=\u0022display:flex;\u0022\u003e\u003cspan\u003eargocd account generate-token --account ci
\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\u003ch3 id=\u0022references\u0022\u003eReferences\u003c/h3\u003e
\u003cp\u003e- \u003ca href=\u0022https://itnext.io/argocd-users-access-and-rbac-ddf9f8b51bad\u0022\u003ehttps://itnext.io/argocd-users-access-and-rbac-ddf9f8b51bad\u003c/a\u003e\u003c/p\u003e
\u003ch2 id=\u0022files\u0022\u003eFiles\u003c/h2\u003e
\u003cp\u003eCustom ArgoCD values: \u003ca href=\u0022/Kubernetes/argocd-values.yaml\u0022\u003eargocd-values.yaml\u003c/a\u003e\u003c/p\u003e
\u003c/span\u003e`,"activity-content",contentDelay)};typeeffetct()</script></div><span class=navFull><span><a href=/>Home</a>
<span>&#8192;|&#8192;</span>
<a href=./..>/kubernetes/</a></span>
<span class=navCredits>Hugo theme created by
<a href=https://github.com/Yukuro/hugo-theme-shell target=_blank rel=noopener>Yukuro</a></span></span></body></html>